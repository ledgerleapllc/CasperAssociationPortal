(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2283],{2283:function(e,r,t){"use strict";t.d(r,{Qr:function(){return L},KN:function(){return M},U2:function(){return d},t8:function(){return P},cI:function(){return Ve}});var n=t(7294),s=e=>"checkbox"===e.type,u=e=>null==e;const c=e=>"object"===typeof e;var i=e=>!u(e)&&!Array.isArray(e)&&c(e)&&!(e instanceof Date),a=e=>e.substring(0,e.search(/.\d/))||e,l=(e,r)=>[...e].some((e=>a(r)===e)),o=e=>e.filter(Boolean),f=e=>void 0===e,d=(e,r,t)=>{if(i(e)&&r){const n=o(r.split(/[,[\].]+?/)).reduce(((e,r)=>u(e)?e:e[r]),e);return f(n)||n===e?f(e[r])?t:e[r]:n}};const b="blur",y="change",g="onBlur",m="onChange",h="onSubmit",v="onTouched",O="all",j="max",p="min",V="maxLength",k="minLength",_="pattern",A="required",w="validate";var R=(e,r)=>{const t=Object.assign({},e);return delete t[r],t};const x=n.createContext(null);x.displayName="RHFContext";const S=()=>n.useContext(x);var F=(e,r,t,n,s=!0)=>e?new Proxy(r,{get:(e,r)=>{if(r in e)return t.current[r]!==O&&(t.current[r]=!s||O),n&&(n.current[r]=!0),e[r]}}):r,C=e=>i(e)&&!Object.keys(e).length,D=(e,r,t)=>{const n=R(e,"name");return C(n)||Object.keys(n).length>=Object.keys(r).length||Object.keys(n).find((e=>r[e]===(!t||O)))},E=e=>Array.isArray(e)?e:[e],N="undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement&&"undefined"!==typeof document;const B=N?"Proxy"in window:"undefined"!==typeof Proxy;function T({name:e,rules:r,defaultValue:t,control:u,shouldUnregister:c}){const a=S(),{defaultValuesRef:o,register:g,fieldsRef:m,unregister:h,fieldArrayNamesRef:v,controllerSubjectRef:O,shouldUnmount:j,inFieldArrayActionRef:p}=u||a.control,{onChange:V,onBlur:k,ref:_}=g(e,r),A=l(v.current,e),[w,R]=n.useState(f(d(m.current,e)._f.value)||A?f(t)?d(o.current,e):t:d(m.current,e)._f.value),x=function(e){const{control:r,name:t}=e||{},s=S(),{formStateRef:u,formStateSubjectRef:c,readFormStateRef:i}=r||s.control,a=n.useRef(t);a.current=t;const[l,o]=n.useState(u.current),f=n.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1});return n.useEffect((()=>{const e=c.current.subscribe({next:e=>(!a.current||!e.name||E(a.current).includes(e.name))&&D(e,f.current)&&o(Object.assign(Object.assign({},u.current),e))});return()=>e.unsubscribe()}),[]),F(B,l,i,f,!1)}({control:u||a.control,name:e});return d(m.current,e)._f.value=w,n.useEffect((()=>{const r=O.current.subscribe({next:r=>(!r.name||e===r.name)&&R(d(r.values,e))});return()=>{r.unsubscribe();const t=j||c;(A?t&&!p.current:t)?h(e):d(m.current,e)&&(d(m.current,e)._f.mount=!1)}}),[e]),{field:{onChange:r=>{const t=(e=>i(e)&&e.target?s(e.target)?e.target.checked:e.target.value:e)(r);R(t),V({target:{value:t,name:e},type:y})},onBlur:()=>{k({target:{name:e},type:b})},name:e,value:w,ref:e=>e&&_(e)},formState:x,fieldState:{invalid:!!d(x.errors,e),isDirty:!!d(x.dirtyFields,e),isTouched:!!d(x.touchedFields,e),error:d(x.errors,e)}}}const L=e=>e.render(T(e));var M=(e,r,t,n,s)=>r?Object.assign(Object.assign({},t[e]),{types:Object.assign(Object.assign({},t[e]&&t[e].types?t[e].types:{}),{[n]:s||!0})}):{},I=e=>/^\w*$/.test(e),U=e=>o(e.replace(/["|']|\]/g,"").split(/\.|\[/));function P(e,r,t){let n=-1;const s=I(r)?[r]:U(r),u=s.length,c=u-1;for(;++n<u;){const r=s[n];let u=t;if(n!==c){const t=e[r];u=i(t)||Array.isArray(t)?t:isNaN(+s[n+1])?{}:[]}e[r]=u,e=e[r]}return e}const q=(e,r,t)=>{for(const n of t||Object.keys(e)){const t=d(e,n);if(t){const e=t._f,n=R(t,"_f");if(e&&r(e.name)){if(e.ref.focus&&f(e.ref.focus()))break;if(e.refs){e.refs[0].focus();break}}else i(n)&&q(n,r)}}},H=(e,r={})=>{for(const t in e.current){const n=e.current[t];if(n&&!u(r)){const e=n._f,s=R(n,"_f");P(r,t,e&&e.ref?e.ref.disabled||e.refs&&e.refs.every((e=>e.disabled))?void 0:e.value:Array.isArray(n)?[]:{}),s&&H({current:s},r[t])}}return r};var $=e=>u(e)||!c(e);function W(e,r,t){if($(e)||$(r)||e instanceof Date||r instanceof Date)return e===r;if(!n.isValidElement(e)){const n=Object.keys(e),s=Object.keys(r);if(n.length!==s.length)return!1;for(const u of n){const n=e[u];if(!t||"ref"!==u){const e=r[u];if((i(n)||Array.isArray(n))&&(i(e)||Array.isArray(e))?!W(n,e,t):n!==e)return!1}}}return!0}function K(e,r){if($(e)||$(r))return r;for(const n in r){const s=e[n],u=r[n];try{e[n]=i(s)&&i(u)||Array.isArray(s)&&Array.isArray(u)?K(s,u):u}catch(t){}}return e}function Q(e,r,t,n,s){let u=-1;for(;++u<e.length;){for(const n in e[u])Array.isArray(e[u][n])?(!t[u]&&(t[u]={}),t[u][n]=[],Q(e[u][n],d(r[u]||{},n,[]),t[u][n],t[u],n)):W(d(r[u]||{},n),e[u][n])?P(t[u]||{},n):t[u]=Object.assign(Object.assign({},t[u]),{[n]:!0});n&&!t.length&&delete n[s]}return t}var z=(e,r,t)=>K(Q(e,r,t.slice(0,e.length)),Q(r,e,t.slice(0,e.length)));var G=e=>"string"===typeof e;var J=e=>"boolean"===typeof e;function X(e,r){const t=I(r)?[r]:U(r),n=1==t.length?e:function(e,r){const t=r.slice(0,-1).length;let n=0;for(;n<t;)e=f(e)?n++:e[r[n++]];return e}(e,t),s=t[t.length-1];let u;n&&delete n[s];for(let c=0;c<t.slice(0,-1).length;c++){let r,n=-1;const s=t.slice(0,-(c+1)),a=s.length-1;for(c>0&&(u=e);++n<s.length;){const t=s[n];r=r?r[t]:e[t],a===n&&(i(r)&&C(r)||Array.isArray(r)&&!r.filter((e=>i(e)&&!C(e)||J(e))).length)&&(u?delete u[t]:delete e[t]),u=r}}return e}function Y(e,r){const t={};for(const n of e){const e=d(r,n);e&&(I(n)?t[n]=e._f:P(t,n,e._f))}return t}var Z=e=>"file"===e.type,ee=e=>"select-multiple"===e.type,re=e=>"radio"===e.type;const te={value:!1,isValid:!1},ne={value:!0,isValid:!0};var se=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!f(e[0].attributes.value)?f(e[0].value)||""===e[0].value?ne:{value:e[0].value,isValid:!0}:ne:te}return te},ue=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:n})=>r?""===e?NaN:+e:t?new Date(e):n?n(e):e;const ce={isValid:!1,value:null};var ie=e=>Array.isArray(e)?e.reduce(((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e),ce):ce;function ae(e){if(e&&e._f){const t=e._f.ref;if(t.disabled)return;return Z(t)?t.files:re(t)?ie(e._f.refs).value:ee(t)?(r=t.options,[...r].filter((({selected:e})=>e)).map((({value:e})=>e))):s(t)?se(e._f.refs).value:ue(f(t.value)?e._f.ref.value:t.value,e._f)}var r}var le=(e,r)=>e&&r&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),oe=e=>"function"===typeof e,fe=e=>G(e)||n.isValidElement(e),de=e=>e instanceof RegExp;function be(e,r,t="validate"){if(fe(e)||Array.isArray(e)&&e.every(fe)||J(e)&&!e)return{type:t,message:fe(e)?e:"",ref:r}}var ye=e=>i(e)&&!de(e)?e:{value:e,message:""},ge=async({_f:{ref:e,refs:r,required:t,maxLength:n,minLength:c,min:a,max:l,pattern:o,validate:f,name:d,value:b,valueAsNumber:y,mount:g}},m)=>{if(!g)return{};const h={},v=re(e),O=s(e),R=v||O,x=(y||Z(e))&&!e.value||""===b||Array.isArray(b)&&!b.length,S=M.bind(null,d,m,h),F=(r,t,n,s=V,u=k)=>{const c=r?t:n;h[d]=Object.assign({type:r?s:u,message:c,ref:e},S(r?s:u,c))};if(t&&(!v&&!O&&(x||u(b))||J(b)&&!b||O&&!se(r).isValid||v&&!ie(r).isValid)){const{value:n,message:s}=fe(t)?{value:!!t,message:t}:ye(t);if(n&&(h[d]=Object.assign({type:A,message:s,ref:R?(r||[])[0]||{}:e},S(A,s)),!m))return h}if((!u(a)||!u(l))&&""!==b){let r,t;const n=ye(l),s=ye(a);if(isNaN(b)){const u=e.valueAsDate||new Date(b);G(n.value)&&(r=u>new Date(n.value)),G(s.value)&&(t=u<new Date(s.value))}else{const c=e.valueAsNumber||parseFloat(b);u(n.value)||(r=c>n.value),u(s.value)||(t=c<s.value)}if((r||t)&&(F(!!r,n.message,s.message,j,p),!m))return h}if(G(b)&&!x&&(n||c)){const e=ye(n),r=ye(c),t=!u(e.value)&&b.length>e.value,s=!u(r.value)&&b.length<r.value;if((t||s)&&(F(t,e.message,r.message),!m))return h}if(G(b)&&o&&!x){const{value:r,message:t}=ye(o);if(de(r)&&!b.match(r)&&(h[d]=Object.assign({type:_,message:t,ref:e},S(_,t)),!m))return h}if(f){const t=R&&r?r[0]:e;if(oe(f)){const e=be(await f(b),t);if(e&&(h[d]=Object.assign(Object.assign({},e),S(w,e.message)),!m))return h}else if(i(f)){let e={};for(const[r,n]of Object.entries(f)){if(!C(e)&&!m)break;const s=be(await n(b),t,r);s&&(e=Object.assign(Object.assign({},s),S(r,s.message)),m&&(h[d]=e))}if(!C(e)&&(h[d]=Object.assign({ref:t},e),!m))return h}}return h},me=e=>({isOnSubmit:!e||e===h,isOnBlur:e===g,isOnChange:e===m,isOnAll:e===O,isOnTouch:e===v}),he=e=>e instanceof HTMLElement;class ve{constructor(){this.tearDowns=[]}add(e){this.tearDowns.push(e)}unsubscribe(){for(const e of this.tearDowns)e();this.tearDowns=[]}}class Oe{constructor(e,r){this.observer=e,this.closed=!1,r.add((()=>this.closed=!0))}next(e){this.closed||this.observer.next(e)}}class je{constructor(){this.observers=[]}next(e){for(const r of this.observers)r.next(e)}subscribe(e){const r=new ve,t=new Oe(e,r);return this.observers.push(t),r}unsubscribe(){this.observers=[]}}const pe="undefined"===typeof window;function Ve({mode:e=h,reValidateMode:r=m,resolver:t,context:c,defaultValues:y={},shouldFocusError:g=!0,shouldUnregister:v,criteriaMode:j}={}){const p=n.useRef({}),V=n.useRef(new Set),k=n.useRef(new je),_=n.useRef(new Set),A=n.useRef(new je),w=n.useRef(new je),x=n.useRef(new je),S=n.useRef({}),T=n.useRef(!1),L=n.useRef(new Set),M=n.useRef(!1),I=n.useRef({}),U=n.useRef({}),K=n.useRef(y),Q=n.useRef(!1),J=n.useRef(c),te=n.useRef(t),ne=n.useRef(new Set),se=me(e),ce=j===O,[ie,fe]=n.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!se.isOnSubmit,errors:{}}),de=n.useRef({isDirty:!B,dirtyFields:!B,touchedFields:!B,isValidating:!B,isValid:!B,errors:!B}),be=n.useRef(ie);J.current=c,te.current=t;const ye=()=>(be.current.isValid=W(U.current,I.current)&&C(be.current.errors),be.current.isValid),ve=n.useCallback(((e,r,t=!1,n={},s,c)=>{const i=d(be.current.errors,e);if(r?(X(U.current,e),P(be.current.errors,e,r)):((d(I.current,e)||te.current)&&P(U.current,e,!0),X(be.current.errors,e)),(t||c||(r?!W(i,r,!0):i)||!C(n)||de.current.isValid&&be.current.isValid!==(te.current?!!s:ye()))&&!u(t)){const r=Object.assign(Object.assign({},n),{isValid:te.current?!!s:ye(),errors:be.current.errors,name:e});be.current=Object.assign(Object.assign({},be.current),r),k.current.next(c?{name:e}:r)}k.current.next({isValidating:!1})}),[]),Oe=n.useCallback(((e,r,t={},n,c)=>{c&&Le(e);const i=d(p.current,e);if(i){const c=i._f;if(c){const i=N&&he(c.ref)&&u(r)?"":r;if(c.value=ue(r,c),re(c.ref)?(c.refs||[]).forEach((e=>e.checked=e.value===i)):Z(c.ref)&&!G(i)?c.ref.files=i:ee(c.ref)?[...c.ref.options].forEach((e=>e.selected=i.includes(e.value))):s(c.ref)&&c.refs?c.refs.length>1?c.refs.forEach((e=>e.checked=Array.isArray(i)?!!i.find((r=>r===e.value)):i===e.value)):c.refs[0].checked=!!i:c.ref.value=i,n){const t=H(p);P(t,e,r),w.current.next({values:Object.assign(Object.assign({},K.current),t),name:e})}t.shouldDirty&&ke(e,i),t.shouldValidate&&Re(e)}else i._f={ref:{name:e,value:r},value:r}}}),[]),Ve=n.useCallback(((e,r)=>{const t=H(p);return e&&r&&P(t,e,r),!W(t,K.current)}),[]),ke=n.useCallback(((e,r,t=!0)=>{if(de.current.isDirty||de.current.dirtyFields){const n=!W(d(K.current,e),r),s=d(be.current.dirtyFields,e),u=be.current.isDirty;n?P(be.current.dirtyFields,e,!0):X(be.current.dirtyFields,e),be.current.isDirty=Ve();const c={isDirty:be.current.isDirty,dirtyFields:be.current.dirtyFields,name:e},i=de.current.isDirty&&u!==c.isDirty||de.current.dirtyFields&&s!==d(be.current.dirtyFields,e);return i&&t&&k.current.next(c),i?c:{}}return{}}),[]),_e=n.useCallback((async(e,r)=>{const t=(await ge(d(p.current,e),ce))[e];return ve(e,t,r),f(t)}),[ce]),Ae=n.useCallback((async(e,r=[])=>{const{errors:t}=await te.current(H(p),J.current,{criteriaMode:j,names:r,fields:Y(V.current,p.current)});for(const n of e){const e=d(t,n);e?P(be.current.errors,n,e):X(be.current.errors,n)}return t}),[j]),we=async e=>{let r=!0;for(const t in e){const n=e[t];if(n){const e=n._f,t=R(n,"_f");if(e){const t=await ge(n,ce);t[e.name]?(r=!1,P(be.current.errors,e.name,t[e.name]),X(U.current,e.name)):d(I.current,e.name)&&(P(U.current,e.name,!0),X(be.current.errors,e.name))}t&&await we(t)}}return r},Re=n.useCallback((async e=>{const r=f(e)?Object.keys(p.current):E(e);let t,n={};return k.current.next({isValidating:!0}),te.current?(n=await Ae(r,f(e)?void 0:r),t=r.every((e=>!d(n,e)))):t=f(e)?await we(p.current):(await Promise.all(r.filter((e=>d(p.current,e))).map((async e=>await _e(e,null))))).every(Boolean),k.current.next(Object.assign(Object.assign({},G(e)?{name:e}:{}),{errors:be.current.errors,isValidating:!1,isValid:te.current?C(n):ye()})),t}),[Ae,_e]),xe=n.useCallback(((e,r,t)=>Object.entries(r).forEach((([r,n])=>{const s=`${e}.${r}`,u=d(p.current,s);ne.current.has(e)||!$(n)||u&&!u._f?xe(s,n,t):Oe(s,n,t,!0,!u)}))),[Re]),Se=e=>Q.current||L.current.has(e)||L.current.has((e.match(/\w+/)||[])[0]),Fe=(e,r,t,n)=>{const s=d(p.current,e),u=f(s._f.value)?d(K.current,e):s._f.value;return s&&!f(u)&&(t&&t.defaultChecked?s._f.value=ae(s):l(ne.current,e)?s._f.value=u:Oe(e,u)),(!f(u)||n)&&le(r,s._f.mount)&&!se.isOnSubmit&&s&&de.current.isValid&&ge(s,ce).then((r=>{C(r)?P(U.current,e,!0):X(U.current,e),be.current.isValid!==ye()&&fe(Object.assign(Object.assign({},be.current),{isValid:ye()}))})),u},Ce=n.useCallback((async({type:e,target:t,target:{value:n,type:u}})=>{let c,i,l=t.name;const o=d(p.current,l);if(o){let y=u?ae(o):void 0;y=f(y)?n:y;const g=e===b,{isOnBlur:m,isOnChange:h}=me(r),v=!le(o._f,o._f.mount)&&!te.current&&!d(be.current.errors,l)||(({isOnBlur:e,isOnChange:r,isOnTouch:t,isTouched:n,isReValidateOnBlur:s,isReValidateOnChange:u,isBlurEvent:c,isSubmitted:i,isOnAll:a})=>!a&&(!i&&t?!(n||c):(i?s:e)?!c:!(i?u:r)||c))(Object.assign({isBlurEvent:g,isTouched:!!d(be.current.touchedFields,l),isSubmitted:be.current.isSubmitted,isReValidateOnBlur:m,isReValidateOnChange:h},se)),O=!g&&Se(l);f(y)||(o._f.value=y);const V=ke(l,o._f.value,!1);g&&!d(be.current.touchedFields,l)&&(P(be.current.touchedFields,l,!0),de.current.touchedFields&&(V.touchedFields=be.current.touchedFields));let _=!C(V)||O;if(v)return!g&&A.current.next({name:l,type:e,formValues:De()}),_&&k.current.next(O?{name:l}:Object.assign(Object.assign({},V),{name:l}));if(k.current.next({isValidating:!0}),te.current){const{errors:e}=await te.current(H(p),J.current,{criteriaMode:j,fields:Y([l],p.current),names:[l]}),r=be.current.isValid;if(c=d(e,l),s(t)&&!c){const r=a(l),t=d(e,r,{});t.type&&t.message&&(c=t),(t||d(be.current.errors,r))&&(l=r)}i=C(e),r!==i&&(_=!0)}else c=(await ge(o,ce))[l];!g&&A.current.next({name:l,type:e,formValues:De()}),ve(l,c,_,V,i,O)}}),[]),De=e=>{const r=Object.assign(Object.assign({},K.current),H(p));return f(e)?r:G(e)?d(r,e):e.map((e=>d(r,e)))},Ee=n.useCallback((async(e={})=>{const r=be.current.isValid;if(t){const{errors:r}=await te.current(Object.assign(Object.assign({},H(p)),e),J.current,{criteriaMode:j,fields:Y(V.current,p.current)});be.current.isValid=C(r)}else ye();r!==be.current.isValid&&k.current.next({isValid:be.current.isValid})}),[j]),Ne=n.useCallback(((e,r,t,n)=>{const s=Array.isArray(e),u=n||M.current?Object.assign(Object.assign({},K.current),n||H(p)):f(r)?K.current:s?r:{[e]:r};if(f(e))return t&&(Q.current=!0),u;const c=[];for(const i of E(e))t&&L.current.add(i),c.push(d(u,i));return s?c:c[0]}),[]),Be=(e,r={})=>{for(const t of e?E(e):Object.keys(V.current))V.current.delete(t),ne.current.delete(t),d(p.current,t)&&(r.keepIsValid||(X(I.current,t),X(U.current,t)),!r.keepError&&X(be.current.errors,t),!r.keepValue&&X(p.current,t),!r.keepDirty&&X(be.current.dirtyFields,t),!r.keepTouched&&X(be.current.touchedFields,t),!v&&!r.keepDefaultValue&&X(K.current,t),A.current.next({name:t,formValues:De()}));k.current.next(Object.assign(Object.assign(Object.assign({},be.current),r.keepDirty?{isDirty:Ve()}:{}),te.current?{}:{isValid:ye()})),!r.keepIsValid&&Ee()},Te=(e,r,t)=>{Le(e,t);let n=d(p.current,e);const u=(e=>re(e)||s(e))(r);if(r===n._f.ref||N&&he(n._f.ref)&&!he(r)||u&&Array.isArray(n._f.refs)&&o(n._f.refs).find((e=>e===r)))return;n={_f:u?Object.assign(Object.assign({},n._f),{refs:[...o(n._f.refs||[]).filter((e=>he(e)&&document.contains(e))),r],ref:{type:r.type,name:e}}):Object.assign(Object.assign({},n._f),{ref:r})},P(p.current,e,n);const c=Fe(e,t,r,!0);(u&&Array.isArray(c)?!W(d(p.current,e)._f.value,c):f(d(p.current,e)._f.value))&&(d(p.current,e)._f.value=ae(d(p.current,e)))},Le=n.useCallback(((e,r)=>{const t=!d(p.current,e);return P(p.current,e,{_f:Object.assign(Object.assign(Object.assign({},t?{ref:{name:e}}:Object.assign({ref:(d(p.current,e)._f||{}).ref||{}},d(p.current,e)._f)),{name:e,mount:!0}),r)}),le(r,!0)&&P(I.current,e,!0),V.current.add(e),t&&Fe(e,r),pe?{name:e}:{name:e,onChange:Ce,onBlur:Ce,ref:t=>{if(t)Te(e,t,r);else{const t=d(p.current,e),n=v||r&&r.shouldUnregister;t&&t._f&&(t._f.mount=!1,f(t._f.value)&&!f(t._f.ref.value)&&(t._f.value=t._f.ref.value)),N&&(l(ne.current,e)?n&&!T.current:n)&&_.current.add(e)}}}}),[K.current]),Me=n.useCallback(((e,r)=>async t=>{t&&(t.preventDefault&&t.preventDefault(),t.persist&&t.persist());let n=!0,s=H(p);k.current.next({isSubmitting:!0});try{if(te.current){const{errors:e,values:r}=await te.current(s,J.current,{criteriaMode:j,fields:Y(V.current,p.current)});be.current.errors=e,s=r}else await we(p.current);C(be.current.errors)&&Object.keys(be.current.errors).every((e=>d(s,e)))?(k.current.next({errors:{},isSubmitting:!0}),await e(s,t)):(r&&await r(be.current.errors,t),g&&q(p.current,(e=>d(be.current.errors,e)),V.current))}catch(u){n=!1}finally{be.current.isSubmitted=!0,k.current.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:C(be.current.errors)&&n,submitCount:be.current.submitCount+1,errors:be.current.errors})}}),[g,ce,j]),Ie=n.useCallback((({keepErrors:e,keepDirty:r,keepIsSubmitted:t,keepTouched:n,keepDefaultValues:s,keepIsValid:u,keepSubmitCount:c},i)=>{u||(U.current={},I.current={}),L.current=new Set,Q.current=!1,k.current.next({submitCount:c?be.current.submitCount:0,isDirty:r?be.current.isDirty:!!s&&W(i,K.current),isSubmitted:!!t&&be.current.isSubmitted,isValid:u?be.current.isValid:!!Ee(i),dirtyFields:r?be.current.dirtyFields:{},touchedFields:n?be.current.touchedFields:{},errors:e?be.current.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})}),[]),Ue=(e,r="")=>{const t=d(p.current,r);if((!t||t&&!t._f)&&(!t&&($(e)||N&&(e instanceof FileList||e instanceof Date))&&P(p.current,r,{_f:{ref:{name:r,value:e},value:e,name:r}}),Array.isArray(e)||i(e))){r&&!d(p.current,r)&&P(p.current,r,Array.isArray(e)?[]:{});for(const t in e)Ue(e[t],r+(r?".":"")+t)}};return n.useEffect((()=>{Ue(K.current);const e=k.current.subscribe({next(e){D(e,de.current,!0)&&(be.current=Object.assign(Object.assign({},be.current),e),fe(be.current))}}),r=x.current.subscribe({next(e){if(e.fields&&e.name&&de.current.isValid){const r=H(p);P(r,e.name,e.fields),Ee(r)}}});return te.current&&de.current.isValid&&Ee(),()=>{A.current.unsubscribe(),e.unsubscribe(),r.unsubscribe()}}),[]),n.useEffect((()=>{const e=e=>!he(e)||!document.contains(e);M.current=!0;for(const r of _.current){const t=d(p.current,r);t&&(t._f.refs?t._f.refs.every(e):e(t._f.ref))&&Be(r)}_.current=new Set})),{control:n.useMemo((()=>({register:Le,isWatchAllRef:Q,inFieldArrayActionRef:T,watchFieldsRef:L,getIsDirty:Ve,formStateSubjectRef:k,fieldArraySubjectRef:x,controllerSubjectRef:w,watchSubjectRef:A,watchInternal:Ne,fieldsRef:p,validFieldsRef:U,fieldsWithValidationRef:I,fieldArrayNamesRef:ne,readFormStateRef:de,formStateRef:be,defaultValuesRef:K,fieldArrayDefaultValuesRef:S,unregister:Be,shouldUnmount:v})),[]),formState:F(B,ie,de),trigger:Re,register:Le,handleSubmit:Me,watch:n.useCallback(((e,r)=>oe(e)?A.current.subscribe({next:t=>e(Ne(void 0,r),t)}):Ne(e,r,!0)),[]),setValue:n.useCallback(((e,r,t={})=>{const n=d(p.current,e),s=ne.current.has(e);s&&(x.current.next({fields:r,name:e,isReset:!0}),(de.current.isDirty||de.current.dirtyFields)&&t.shouldDirty&&(P(be.current.dirtyFields,e,z(r,d(K.current,e,[]),d(be.current.dirtyFields,e,[]))),k.current.next({name:e,dirtyFields:be.current.dirtyFields,isDirty:Ve(e,r)})),!r.length&&P(p.current,e,[])&&P(S.current,e,[])),(n&&!n._f||s)&&!u(r)?xe(e,r,s?{}:t):Oe(e,r,t,!0,!n),Se(e)&&k.current.next({}),A.current.next({name:e,formValues:De()})}),[xe]),getValues:n.useCallback(De,[]),reset:n.useCallback(((e,r={})=>{const t=e||K.current;if(N&&!r.keepValues)for(const s of V.current){const e=d(p.current,s);if(e&&e._f){const r=Array.isArray(e._f.refs)?e._f.refs[0]:e._f.ref;try{he(r)&&r.closest("form").reset();break}catch(n){}}}!r.keepDefaultValues&&(K.current=Object.assign({},t)),r.keepValues||(p.current={},w.current.next({values:Object.assign({},t)}),A.current.next({formValues:Object.assign({},t)}),x.current.next({fields:Object.assign({},t),isReset:!0})),!r.keepDefaultValues&&Ue(Object.assign({},t)),Ie(r,e)}),[]),clearErrors:n.useCallback((e=>{e?E(e).forEach((e=>X(be.current.errors,e))):be.current.errors={},k.current.next({errors:be.current.errors})}),[]),unregister:n.useCallback(Be,[]),setError:n.useCallback(((e,r,t)=>{const n=((d(p.current,e)||{_f:{}})._f||{}).ref;P(be.current.errors,e,Object.assign(Object.assign({},r),{ref:n})),k.current.next({name:e,errors:be.current.errors,isValid:!1}),t&&t.shouldFocus&&n&&n.focus&&n.focus()}),[]),setFocus:n.useCallback((e=>d(p.current,e)._f.ref.focus()),[])}}}}]);