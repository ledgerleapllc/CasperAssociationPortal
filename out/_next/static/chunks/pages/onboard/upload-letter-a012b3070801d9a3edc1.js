(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9216],{9420:function(e,t,n){"use strict";var r,a=n(67294);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return a.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 41.191 41.191"},e),r||(r=a.createElement("path",{"data-name":"Icon metro-cross",d:"M40.815 33.092l-12.5-12.5 12.5-12.5a1.29 1.29 0 000-1.82l-5.9-5.9a1.291 1.291 0 00-1.82 0l-12.5 12.5L8.099.372a1.29 1.29 0 00-1.82 0l-5.9 5.9a1.29 1.29 0 000 1.82l12.5 12.5-12.5 12.5a1.29 1.29 0 000 1.82l5.9 5.9a1.29 1.29 0 001.82 0l12.5-12.5 12.5 12.5a1.29 1.29 0 001.82 0l5.9-5.9a1.29 1.29 0 000-1.82z",fill:"currentColor"})))}},24015:function(e,t,n){"use strict";n.d(t,{a:function(){return u}});var r=n(96156),a=n(85893),i=n(67294),s=n(11163),l=n(49226);var o=n(44791);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var u=function(e,t){return function(n){var u=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).urlType,t=void 0===e?"public":e,n=(0,l.v9)((function(e){return e.authReducer.userInfo}));return(0,i.useEffect)((function(){if("public"!==t&&t&&n)if(n&&null!==n&&void 0!==n&&n.isLoggedIn)if("member"===n.role){if("auth"===t)return"verifying"===n.period&&s.default.push("/verify-email"),"onboarding"===n.period&&s.default.push("/onboard"),void("final"===n.period&&s.default.push("/dashboard"));if("verifying"===t)return"onboarding"===n.period&&s.default.push("/onboard"),void("final"===n.period&&s.default.push("/dashboard"));if("onboarding"===t)return"verifying"===n.period&&s.default.push("/verify-email"),void("final"===n.period&&s.default.push("/dashboard"));if("final-member"===t||"final-all"===t)return"verifying"===n.period&&s.default.push("/verify-email"),void("onboarding"===n.period&&s.default.push("/onboard"));"final-admin"===t&&("verifying"===n.period&&s.default.push("/verify-email"),"onboarding"===n.period&&s.default.push("/onboard"),"final"===n.period&&s.default.push("/dashboard"))}else"admin"===n.role&&"final-all"!==t&&"final-admin"!==t&&s.default.push("/admin/dashboard");else"auth"!==t&&s.default.push("/login")}),[n,t]),{user:n}}({urlType:t}).user;if(t&&"public"!==t){if(!u)return(0,a.jsx)(o.Z,{});if("auth"===t&&u.isLoggedIn)return(0,a.jsx)(o.Z,{});if("auth"!==t&&!u.isLoggedIn)return(0,a.jsx)(o.Z,{});if("member"===u.role){if(["final-all","final-member"].includes(t)&&"final"!==u.period)return(0,a.jsx)(o.Z,{});if(["verifying"].includes(t)&&"verifying"!==u.period)return(0,a.jsx)(o.Z,{});if(["onboarding"].includes(t)&&"onboarding"!==u.period)return(0,a.jsx)(o.Z,{})}if("admin"===u.role&&["verifying","onboarding","final-member"].includes(t))return(0,a.jsx)(o.Z,{})}return(0,a.jsx)(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n))}}},66570:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r,a=n(85893),i=n(87757),s=n.n(i),l=n(92137),o=n(25675),c=n(49226),u=n(67294);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var m=function(e){return u.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 35 23"},e),r||(r=u.createElement("g",{"data-name":"Group 1031",fill:"none",stroke:"currentColor",strokeWidth:3},u.createElement("path",{"data-name":"Line 1",d:"M35 21.5H0"}),u.createElement("path",{"data-name":"Line 2",d:"M35 11.5H9.082"}),u.createElement("path",{"data-name":"Line 3",d:"M35 1.5H0"}))))},f=n(43022),p=function(e){var t=e.className,n=e.theme,r=(0,c.I0)();return(0,a.jsxs)("div",{className:"flex items-center justify-between ".concat(t||""),children:[(0,a.jsx)(o.default,{className:"animate__animated animate__fadeIn",src:"/images/casper_logo_".concat(n,".svg"),alt:"casper logo",width:125,height:33}),(0,a.jsx)("button",{className:"animate__animated animate__fadeIn animate__delay-2s",type:"button",onClick:function(){var e=(0,l.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),r((0,f.Rg)());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:(0,a.jsx)(m,{width:"2rem",height:"1.25rem",className:"".concat("light"===n?"text-white":"text-dark2")})})]})}},69299:function(e,t,n){"use strict";var r=n(85893),a=n(11163),i=n(67294),s=n(49226),l=n(43022);t.Z=function(e){var t=e.title,n=e.description,o=e.imageUrl,c=e.currentStep,u=e.totalSteps,d=e.stepContent,m=e.showNextButton,f=e.showContinueButton,p=e.continueButtonTitle,x=e.hideContinueButton,h=e.onPrev,b=e.onNext,g=(0,a.useRouter)(),y=(0,i.useState)(!1),v=y[0],j=y[1],_=(0,s.v9)((function(e){return e.authReducer.userInfo})),N=(0,s.I0)();(0,i.useEffect)((function(){("Upload Letter"===t&&null!==_&&void 0!==_&&_.letter_verified_at&&_.signature_request_id&&_.node_verified_at||"Esign Terms"===t&&2===c&&_.node_verified_at&&null!==_&&void 0!==_&&_.letter_verified_at||"Verify Node Ownership"===t&&3===c&&_.signature_request_id&&null!==_&&void 0!==_&&_.letter_verified_at)&&j(!0)}),[c,t]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"block lg:hidden w-full flex justify-between animate__animated animate__fadeInUp",children:[(0,r.jsxs)("button",{type:"button",className:"flex items-center focus:outline-none",onClick:h,children:[(0,r.jsx)("img",{src:"/images/ic_prev_circle.svg",alt:"prev",width:"18",height:"18",className:"mr-2"}),(0,r.jsx)("span",{className:"text-primary text-sm",children:"Back"})]}),"Submit KYC"===t?(0,r.jsx)("ul",{className:"list-disc lg:list-none",children:(0,r.jsx)("li",{className:"text-primary font-bold text-sm",children:4===c||5===c?"CSPR Owner KYC":"Operator KYC"})}):(0,r.jsxs)("button",{type:"button",className:"flex items-center focus:outline-none ".concat(m?"visible":"invisible"),onClick:b,children:[(0,r.jsx)("span",{className:"text-primary text-sm",children:"Next"}),(0,r.jsx)("img",{src:"/images/ic_next_circle.svg",alt:"next",width:"18",height:"18",className:"ml-2"})]}),!m&&"Submit KYC"===t&&(0,r.jsx)("ul",{className:"list-disc lg:list-none",children:(0,r.jsx)("li",{className:"text-primary font-bold text-sm",children:"Operator KYC"})})]}),(0,r.jsxs)("div",{className:"w-full lg:w-8.85/10",children:[(0,r.jsxs)("div",{className:"hidden lg:flex border-b border-gray pb-1 animate__animated animate__fadeInUp",children:[(0,r.jsx)("span",{className:"font-bold text-dark2",children:t}),"Submit KYC"===t&&(0,r.jsxs)("ul",{className:"flex list-disc",children:[(0,r.jsx)("li",{className:"mx-44 text-sm text-primary ".concat(c>=2?"font-bold":"text-opacity-50"),children:"Operator KYC"}),(0,r.jsx)("li",{className:"mx-44 text-sm text-primary ".concat(c>=4?"font-bold":"text-opacity-50"),children:"CSPR Owner KYC"})]})]}),(0,r.jsx)("div",{className:"hidden lg:block border-b border-primary border-2 animate__animated animate__fadeInUp",style:{width:"".concat(100*c/u,"%")}}),(0,r.jsxs)("div",{id:"custom-content",className:"mt-2 lg:flex lg:space-x-12 animate__animated animate__fadeInUp",children:[(0,r.jsxs)("div",{className:"relative w-full lg:w-auto lg:flex-none lg:h-114",children:[(0,r.jsx)("img",{src:o,alt:"esign terms",className:"w-full h-44 lg:h-auto object-cover"}),(0,r.jsxs)("div",{className:"absolute bottom-0 mx-4 my-8 opacity-30",children:[(0,r.jsx)("p",{className:"text-2xl",children:t}),(0,r.jsx)("p",{className:"text-sm text-dark1 mt-2",children:n})]})]}),(0,r.jsx)("div",{className:"flex-grow",children:d})]}),(0,r.jsxs)("div",{className:"hidden lg:flex justify-between border-b border-gray pb-2",children:[(0,r.jsxs)("button",{type:"button",className:"".concat("Submit KYC"===t&&6===c&&"invisible"," text-center ml-4 text-sm text-dark3 flex flex-col items-center justify-end focus:outline-none animate__animated animate__fadeInUp animate__delay-2s"),onClick:h,children:[(0,r.jsx)("img",{src:"/images/ic_prev_circle_gradient_small.svg",alt:"back",className:"mb-1"}),"Back"]}),!x&&(0,r.jsx)("div",{className:"animate__animated animate__fadeInUp animate__delay-4s",children:(0,r.jsxs)("button",{type:"button",className:"text-center ml-5 text-sm text-dark3 focus:outline-none disabled:opacity-25 disabled:cursor-not-allowed",disabled:!f,onClick:function(){v?(g.push("/dashboard"),N((0,l.Nq)({period:"final"}))):b()},children:[(0,r.jsx)("img",{src:"/images/ic_next_circle_gradient_large.svg",alt:"go to esign",className:"mb-1"}),v?"To Dashboard":p]})})]})]})]})}},70638:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var r=n(85893),a=n(67294),i=n(11163),s=n(49226),l=n(7667),o=n(66570),c=n(96156),u=n(30463),d=n(9420),m=n(28569);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(e){var t=e.status,n=e.selectedDocument,i=e.onDocumentSelect,s=(0,a.useState)(!1),l=s[0],o=s[1],c=(0,a.useRef)(null);(0,a.useEffect)((function(){return document.addEventListener("click",j,!0),function(){document.removeEventListener("click",j,!0)}}),[]);var f=function(e){"open"===e?(document.getElementById("custom-content").classList.add("remove-animation"),o(!0)):"close"===e&&o(!1)},x=(0,a.useCallback)((function(e){var t=e[0];if(t){var n=t.name,r={lastModified:t.lastModified,lastModifiedDate:t.lastModifiedDate,type:t.type},a=new File([t],n,r);f("close"),i({name:n,file:a})}}),[]),h=(0,u.u)({multiple:!1,onDrop:x,accept:".pdf, .doc, .docx, .txt, .rtf"}),b=h.getRootProps,g=h.getInputProps,y=h.isDragReject,v=h.fileRejections,j=function(e){var t,n=e.target;null!==c&&void 0!==c&&null!==(t=c.current)&&void 0!==t&&t.contains(n)||f("close")};return console.log("isDragReject",y,v),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"pt-8",children:["rejected"===t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"text-2.5xl",children:"Thank you for your uploading."}),(0,r.jsx)("p",{className:"text-sm mt-2 lg:mb-14 mb-14 text-dark1",children:"Unfortunately at this time we are unable to accept you letter of motivation. You can resubmit your letter and try again."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"text-2.5xl",children:"First, please upload a letter explaining why you would like to join."}),(0,r.jsx)("p",{className:"text-sm mt-2 lg:mb-14 mb-14 text-dark1",children:"Each member in the portal must upload a \u201cletter of motivation\u201d summarizing why they are requesting to become a member. This letter should explain, in a short paragraph or two, why you would like to become a member of the Casper Association and include the signature of the node operator or person in a management role within your organization."})]}),(0,r.jsxs)("div",{className:"lg:flex-column lg:space-x-5 lg:justify-start animate__animated animate__fadeInUp animate__delay-2s",children:[(0,r.jsx)(m.fl,{type:"submit",title:"Upload letter",className:"text-lg text-white w-full lg:w-64 h-16 rounded-full bg-primary hover:opacity-40 focus:outline-none shadow-lg",onClick:function(){return f("open")}}),n&&(0,r.jsxs)("div",{className:"flex mt-5 items-center",children:[(0,r.jsx)("button",{className:"pr-3 w-7",onClick:function(){return i(null)},type:"button",children:(0,r.jsx)(d.Z,{className:"text-primary"})}),(0,r.jsx)("span",{className:"text-sm text-primary",children:n.name})]})]})]}),l&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"backdrop-filter backdrop-blur-sm justify-center items-center flex fixed inset-0 z-50",children:(0,r.jsx)("div",{className:"w-full max-w-2xl shadow-2xl mx-4 relative bg-white",ref:c,children:(0,r.jsx)("div",p(p({},b()),{},{children:(0,r.jsx)("div",{className:"py-36 flex flex-col items-center justify-between border-2 border-dashed border-gray",children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-between",children:[(0,r.jsx)("input",p({},g())),(0,r.jsx)("img",{src:"/images/ic_upload.svg",alt:"upload",className:"align-middle mb-6"}),(0,r.jsx)("button",{type:"button",className:"mb-2.5 text-lg text-white w-full px-14 py-5 shadow-lg rounded-full bg-primary hover:opacity-40 focus:outline-none",children:"Upload Letter of Motivation"}),(0,r.jsx)("span",{className:"hidden lg:block",children:"Or Drap File Here"}),(y||!!v.length)&&(0,r.jsx)("span",{className:"hidden lg:block text-primary",children:"Only *.pdf, *.doc, *.docx, *.txt, *.rtf file will be accepted"})]})})}))})}),(0,r.jsx)("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]})]})},h=function(){return(0,r.jsxs)("div",{className:"pt-8",children:[(0,r.jsx)("p",{className:"text-2.5xl",children:"Thanks!"}),(0,r.jsx)("p",{className:"text-sm mt-2 lg:mb-14 mb-14 text-dark1",children:"An admin must approve the document you uploaded. This usually happens within 24hrs. You can check the status later."}),(0,r.jsxs)("p",{className:"text-2.5xl",children:["Status: ",(0,r.jsx)("span",{className:"text-success",children:"Pending"})]})]})},b=n(69299),g=n(11455),y=n(24015),v=n(43022),j=n(56073),_=(0,y.a)((function(){var e=(0,s.I0)(),t=(0,i.useRouter)(),n=(0,a.useContext)(j.AppContext).setLoading,c=(0,a.useState)(null),u=c[0],d=c[1],m=(0,a.useState)(null),f=m[0],p=m[1],y=(0,a.useState)(null),_=y[0],N=y[1],w=(0,s.v9)((function(e){return e.authReducer.userInfo}));(0,a.useEffect)((function(){w.letter_verified_at?w.signature_request_id&&w.node_verified_at?(e((0,v.Nq)({period:"final"})),t.push("/dashboard")):t.push("/onboard"):null!==w&&void 0!==w&&w.letter_file?N(2):(N(1),w.letter_rejected_at?p("rejected"):p(null))}),[w]);return(0,r.jsx)("div",{className:"flex justify-center min-h-screen",children:(0,r.jsxs)("div",{className:"w-full md:max-w-screen-2xl md:p-9 p-4 flex flex-col",children:[(0,r.jsx)(o.Z,{theme:"dark"}),(0,r.jsx)("div",{className:"flex-grow md:flex md:items-center justify-center mt-12 md:mt-0",children:(0,r.jsx)(b.Z,{title:"Upload Letter",description:"Write and upload a short letter outlining why you would like to sign up.",imageUrl:"/images/img_signature_blur.png",currentStep:_,totalSteps:2,stepContent:1===_?(0,r.jsx)(x,{selectedDocument:u,onDocumentSelect:function(e){d(u===e?null:e)},status:f}):2===_?(0,r.jsx)(h,{}):(0,r.jsx)(r.Fragment,{}),showNextButton:u||2===_,showContinueButton:u||2===_,continueButtonTitle:"Continue",onPrev:function(){t.back()},onNext:function(){2!==_?(n(!0),e((0,g.cf)({newFile:u.file},(function(){n(!1),e((0,v.Nq)({letter_file:u.name,letter_rejected_at:null})),N(2)}),(function(){n(!1)})))):t.push("/onboard")}})}),(0,r.jsx)(l.Z,{theme:"dark"})]})})}),"onboarding")},43022:function(e,t,n){"use strict";n.d(t,{q0:function(){return r},Rg:function(){return a},uB:function(){return i},xv:function(){return s},c0:function(){return l},s:function(){return o},gQ:function(){return c},lm:function(){return u},D:function(){return d},CS:function(){return m},$Y:function(){return f},B0:function(){return p},av:function(){return x},Nq:function(){return h},pn:function(){return b}});var r=function(e,t,n){return{type:"LOGIN_APP",callback:t,payload:e,resetSubmitting:n}},a=function(){return{type:"LOGOUT_APP"}},i=function(e,t,n){return{type:"REGISTER_ENTITY",callback:t,payload:e,resetSubmitting:n}},s=function(e,t,n){return{type:"REGISTER_INDIVIDUAL",callback:t,payload:e,resetSubmitting:n}},l=function(e,t,n){return{type:"RESET_PASSWORD",callback:t,payload:e,resetSubmitting:n}},o=function(e,t,n){return{type:"UPDATE_EMAIL",callback:t,payload:e,resetSubmitting:n}},c=function(e,t,n){return{type:"UPDATE_PASSWORD",callback:t,payload:e,resetSubmitting:n}},u=function(e,t,n){return{type:"VERIFY_EMAIL",callback:t,payload:e,resetSubmitting:n}},d=function(e,t){return{type:"RESEND_2FA_CODE",resolve:e,reject:t}},m=function(e){return{type:"FETCH_USER_INFO",resolve:e}},f=function(e){return{type:"FETCH_USER_INFO_SUCCESS",payload:e}},p=function(e){return{type:"FETCH_USER_INFO_ERROR",payload:e}},x=function(e){return{type:"SET_USER_INFO",payload:e}},h=function(e){return{type:"UPDATE_USER_INFO",payload:e}},b=function(){return{type:"CLEAR_USER_INFO"}}},91394:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/onboard/upload-letter",function(){return n(70638)}])}},function(e){e.O(0,[9774,2554,4597,9650,6993,6095,9669,3913,463,1878,5774],(function(){return t=91394,e(e.s=t);var t}));var t=e.O();_N_E=t}]);