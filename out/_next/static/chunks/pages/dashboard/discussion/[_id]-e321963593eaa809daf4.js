(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8451],{94677:function(e,n,t){"use strict";var r,i,a,s=t(67294);function l(){return(l=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}n.Z=function(e){return s.createElement("svg",l({id:"ic_like_svg__Icon_ionic-md-thumbs-up","data-name":"Icon ionic-md-thumbs-up",xmlns:"http://www.w3.org/2000/svg",width:16.486,height:15.222},e),r||(r=s.createElement("defs",null,s.createElement("style",null,".ic_like_svg__cls-1{fill:none;stroke:#9a9a9a}"))),i||(i=s.createElement("path",{id:"ic_like_svg__Path_11186","data-name":"Path 11186",className:"ic_like_svg__cls-1",d:"M12.756 19.722h6.818a1.454 1.454 0 001.356-.928l2.263-5.367a1.517 1.517 0 00.1-.555v-1.53a1.748 1.748 0 00-1.5-1.768h-4.72l.714-3.231.024-.238a1.149 1.149 0 00-.329-.8l-.8-.8-4.996 5.041a1.526 1.526 0 00-.436 1.074v7.611a1.5 1.5 0 001.506 1.491z",transform:"translate(-6.81 -4.5)"})),a||(a=s.createElement("path",{id:"ic_like_svg__Path_11187","data-name":"Path 11187",className:"ic_like_svg__cls-1",d:"M3.375 15.75h2.537v8.879H3.375z",transform:"translate(-3.375 -9.408)"})))}},24015:function(e,n,t){"use strict";t.d(n,{a:function(){return c}});var r=t(96156),i=t(85893),a=t(67294),s=t(11163),l=t(49226);var o=t(44791);function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var c=function(e,n){return function(t){var c=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).urlType,n=void 0===e?"public":e,t=(0,l.v9)((function(e){return e.authReducer.userInfo}));return(0,a.useEffect)((function(){if("public"!==n&&n&&t)if(t&&null!==t&&void 0!==t&&t.isLoggedIn)if("member"===t.role){if("auth"===n)return"verifying"===t.period&&s.default.push("/verify-email"),"onboarding"===t.period&&s.default.push("/onboard"),void("final"===t.period&&s.default.push("/dashboard"));if("verifying"===n)return"onboarding"===t.period&&s.default.push("/onboard"),void("final"===t.period&&s.default.push("/dashboard"));if("onboarding"===n)return"verifying"===t.period&&s.default.push("/verify-email"),void("final"===t.period&&s.default.push("/dashboard"));if("final-member"===n||"final-all"===n)return"verifying"===t.period&&s.default.push("/verify-email"),void("onboarding"===t.period&&s.default.push("/onboard"));"final-admin"===n&&("verifying"===t.period&&s.default.push("/verify-email"),"onboarding"===t.period&&s.default.push("/onboard"),"final"===t.period&&s.default.push("/dashboard"))}else"admin"===t.role&&"final-all"!==n&&"final-admin"!==n&&s.default.push("/admin/dashboard");else"auth"!==n&&s.default.push("/login")}),[t,n]),{user:t}}({urlType:n}).user;if(n&&"public"!==n){if(!c)return(0,i.jsx)(o.Z,{});if("auth"===n&&c.isLoggedIn)return(0,i.jsx)(o.Z,{});if("auth"!==n&&!c.isLoggedIn)return(0,i.jsx)(o.Z,{});if("member"===c.role){if(["final-all","final-member"].includes(n)&&"final"!==c.period)return(0,i.jsx)(o.Z,{});if(["verifying"].includes(n)&&"verifying"!==c.period)return(0,i.jsx)(o.Z,{});if(["onboarding"].includes(n)&&"onboarding"!==c.period)return(0,i.jsx)(o.Z,{})}if("admin"===c.role&&["verifying","onboarding","final-member"].includes(n))return(0,i.jsx)(o.Z,{})}return(0,i.jsx)(e,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},t))}}},67369:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return H}});var r,i,a=t(96156),s=t(85893),l=t(32465),o=t(67294),d=t(49226),c=t(11163),u=t(42283),f=t(29163),h=t(25955),m=t(28569),p=t(64605),v=t(4478),g=t(94677);function b(){return(b=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var x,_,j=function(e){return o.createElement("svg",b({"data-name":"Icon ionic-md-thumbs-up",xmlns:"http://www.w3.org/2000/svg",width:16.486,height:15.222},e),r||(r=o.createElement("path",{"data-name":"Path 11186",fill:"currentColor",className:"ic_like_solid_svg__cls-1",d:"M5.946 15.222h6.818a1.454 1.454 0 001.356-.928l2.263-5.367a1.517 1.517 0 00.1-.555v-1.53a1.748 1.748 0 00-1.5-1.768h-4.72l.714-3.231.024-.238a1.149 1.149 0 00-.329-.8l-.8-.8-4.996 5.041A1.526 1.526 0 004.44 6.12v7.611a1.5 1.5 0 001.506 1.491z"})),i||(i=o.createElement("path",{"data-name":"Path 11187",fill:"currentColor",className:"ic_like_solid_svg__cls-1",d:"M0 6.342h2.537v8.879H0z"})))};function y(){return(y=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var w,N=function(e){return o.createElement("svg",y({xmlns:"http://www.w3.org/2000/svg",width:17.49,height:16.427},e),x||(x=o.createElement("defs",null,o.createElement("style",null,".ic_dislike_svg__cls-1{fill:none;stroke:#9a9a9a}"))),_||(_=o.createElement("g",{id:"ic_dislike_svg__Icon_ionic-md-thumbs-down","data-name":"Icon ionic-md-thumbs-down",transform:"translate(.5 .5)"},o.createElement("path",{id:"ic_dislike_svg__Path_11188","data-name":"Path 11188",className:"ic_dislike_svg__cls-1",d:"M13.919 4.5H7.1a1.454 1.454 0 00-1.356.928l-2.266 5.367a1.517 1.517 0 00-.1.555v1.53a1.748 1.748 0 001.5 1.768H9.6l-.714 3.231-.024.238a1.149 1.149 0 00.329.8l.793.8 5-5.042a1.526 1.526 0 00.436-1.074V5.99a1.5 1.5 0 00-1.501-1.49z",transform:"translate(-3.375 -4.5)"}),o.createElement("path",{id:"ic_dislike_svg__Path_11189","data-name":"Path 11189",className:"ic_dislike_svg__cls-1",d:"M28.125 4.5h2.537v8.879h-2.537z",transform:"translate(-14.172 -4.5)"}))))};function O(){return(O=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var k=function(e){return o.createElement("svg",O({xmlns:"http://www.w3.org/2000/svg",width:17.49,height:16.427},e),w||(w=o.createElement("g",{"data-name":"Icon ionic-md-thumbs-down"},o.createElement("path",{"data-name":"Path 11188",fill:"currentColor",className:"ic_dislike_solid_svg__cls-1",d:"M11.044.5H4.225a1.454 1.454 0 00-1.356.928L.603 6.795a1.517 1.517 0 00-.1.555v1.53a1.748 1.748 0 001.5 1.768h4.722l-.714 3.231-.024.238a1.149 1.149 0 00.329.8l.793.8 5-5.042a1.526 1.526 0 00.436-1.074V1.99A1.5 1.5 0 0011.044.5z"}),o.createElement("path",{"data-name":"Path 11189",fill:"currentColor",className:"ic_dislike_solid_svg__cls-1",d:"M14.453.5h2.537v8.879h-2.537z"}))))},P=t(24015),E=t(29586),C=t(8517),I=t(56073);function M(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?M(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):M(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function D(){var e=(0,l.Z)(["\n  .discussion-table {\n    .col-1 {\n      width: 0%;\n    }\n    .col-2 {\n      width: 100%;\n    }\n"]);return D=function(){return e},e}var A=f.ZP.div(D()),S=function(e){var n,t=e.data,r=e.noBorder;return(0,s.jsxs)("div",{className:"flex py-8 border-gray1 flex-col lg:flex-row ".concat(r?"":"border-b"),children:[(0,s.jsxs)("div",{className:"flex-none flex flex-row lg:flex-col lg:w-44",children:[(0,s.jsx)("div",{className:"w-24 h-24 mr-5 lg:mr-12",children:(0,s.jsx)("img",{className:"h-full w-full object-cover rounded-lg shadow-lg",src:(null===t||void 0===t||null===(n=t.user)||void 0===n?void 0:n.avatar_url)||"/images/img_signature.png",alt:"avatar"})}),(0,s.jsxs)("div",{className:"pt-2 pr-6 mt-auto lg:mt-0",children:[(0,s.jsx)("p",{className:"text-sm font-bold py-1",children:t.user.pseudonym}),(0,s.jsx)("div",{className:"border-gray1 border-b"}),(0,s.jsxs)("p",{className:"text-xxs py-1",children:["Validator ID: ",t.user.validatorId]}),(0,s.jsx)("div",{className:"border-gray1 border-b"}),(0,s.jsx)("p",{className:"text-xxs py-1",children:(0,E.p)(t.user.created_at,"d/m/yyyy - hh:mma")}),(0,s.jsx)("div",{className:"border-gray1 border-b"})]})]}),(0,s.jsx)("div",{className:"chat-content mt-5 lg:m-0",children:(0,s.jsx)("div",{className:"chat-content-body",children:(0,s.jsx)("p",{className:"text-sm mb-5",dangerouslySetInnerHTML:{__html:t.description}})})})]})},H=(0,P.a)((function(){var e=(0,d.v9)((function(e){return e.authReducer.userInfo.fullInfo})),n=(0,o.useState)(null),t=n[0],r=n[1],i=(0,v.R)().setDialog,a=(0,c.useRouter)().query._id,l=(0,d.I0)(),f=(0,o.useContext)(I.AppContext).setLoading,b=(0,o.useState)(!1),x=b[0],_=b[1],y=(0,o.useState)(!1),w=y[0],O=y[1],P=(0,u.cI)({mode:"onChange"}),E=P.control,M=P.handleSubmit,D=P.setValue,H=(0,p.x)(),L=H.data,z=H.register,B=H.hasMore,R=H.appendData,T=H.setHasMore,V=H.page,X=H.setPage,q=function(n){n&&t.is_like||!n&&t.is_vote&&!t.is_like||t.user.id===(null===e||void 0===e?void 0:e.id)||i({type:"DialogConfirm",data:{title:"Are you sure you want to ".concat(n?"upvote":"downvote"," this discussion post?"),ok:"OK",cancel:"Cancel"},afterClosed:function(e){e&&l((0,C.ob)({discussion_id:a,is_like:n},(function(e){var n,t;r(Z(Z({},e.discussion),{is_vote:null===e||void 0===e||null===(n=e.vote)||void 0===n?void 0:n.id,is_like:null===e||void 0===e||null===(t=e.vote)||void 0===t?void 0:t.is_like}))})))}})};(0,o.useEffect)((function(){a&&(Q(),K())}),[a]);var Q=function(){f(!0),l((0,C.XQ)(a,(function(e){r(e),f(!1)}),(function(){f(!1)})))},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;l((0,C.oo)({id:a,page:e},(function(e,n){R(e),T(n),X((function(e){return e+1}))})))},F=function(){return(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsxs)("button",{type:"button",className:"flex px-6 items-center focus:outline-none",onClick:function(){return q(1)},children:[t.is_vote&&t.is_like?(0,s.jsx)(j,{className:"text-primary"}):(0,s.jsx)(g.Z,{}),(0,s.jsx)("span",{className:"pl-2.5",children:t.likes||0})]}),(0,s.jsxs)("button",{type:"button",className:"flex px-6 items-center focus:outline-none",onClick:function(){return q(0)},children:[t.is_vote&&!t.is_like?(0,s.jsx)(k,{className:"text-primary"}):(0,s.jsx)(N,{}),(0,s.jsx)("span",{className:"pl-2.5",children:t.dislikes||0})]})]})};return(0,s.jsx)(h.Z,{children:(0,s.jsx)(m.Zb,{className:"h-full lg:pl-24 lg:py-11 lg:shadow-2xl",noShadow:!0,children:t&&(0,s.jsxs)("div",{className:"w-full h-full",children:[(0,s.jsxs)("div",{className:"card-header lg:mr-24 lg:h-70px",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(m.xE,{href:"/dashboard/discussion",text:"Discussions"}),(0,s.jsx)("div",{className:"inline-block lg:hidden pb-2.5",children:(0,s.jsx)(F,{})})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-3.5",children:[(0,s.jsx)("h3",{className:"text-dark2 text-xl lg:pr-32 font-medium line-clamp-1",children:t.title}),(0,s.jsx)("div",{className:"hidden lg:inline-block",children:(0,s.jsx)(F,{})})]}),(0,s.jsx)("div",{className:"border-primary border-b-2"})]}),(0,s.jsx)("div",{className:"card-body overflow-y-auto lg:h-100%-70px",children:(0,s.jsxs)("div",{className:"lg:pr-24",children:[(0,s.jsx)(S,{data:t,noBorder:!0}),e&&t.user.id!==e.id&&(0,s.jsx)("div",{className:"relative pt-4 mb-8 lg:mb-12 ck-editor-reverse",children:(0,s.jsxs)("form",{onSubmit:M((function(e){var n;_(!0),n=e,l((0,C.nn)({comment_id:(null===n||void 0===n?void 0:n.id)||null,discussion_id:a,description:n.description},(function(e){var n=e.comment,t=null===L||void 0===L?void 0:L.findIndex((function(e){return e.id===n.id}));-1!==t&&L.splice(t,1),R([n],!0),_(!1),D("description","")}),(function(){_(!1)})))})),children:[(0,s.jsx)(u.Qr,{name:"description",control:E,render:function(e){var n=e.field,t=n.value,r=n.onChange;return(0,s.jsx)(m.ML,{value:t,onChange:function(e){O((function(n){return!!e.length})),r(e)}})},rules:{required:""}}),(0,s.jsx)(m.fl,{type:"submit",isDisabled:!w||x,isLoading:x,title:"Add Comment",className:"tmy-5 h-16 lg:absolute lg:m-0 lg:bottom-4 lg:right-12 lg:h-11 text-lg w-full text-white lg:w-48 rounded-full bg-primary hover:opacity-40 disabled:opacity-40 disabled:cursor-not-allowed focus:outline-none shadow-mdext-lg text-white w-full mt-10 lg:w-auto px-7 h-12 rounded-full bg-primary hover:opacity-40 disabled:opacity-40 disabled:cursor-not-allowed focus:outline-none shadow-md"})]})}),(0,s.jsx)("div",{className:"hidden lg:block border-primary border-b"}),(0,s.jsx)("div",{className:"pb-20 h-500px",children:(0,s.jsx)(A,{className:"h-full",children:(0,s.jsxs)(m.iA,Z(Z({},z),{},{className:"discussion-table h-full",onLoadMore:K,hasMore:B,dataLength:L.length,noMargin:!0,children:[(0,s.jsxs)(m.iA.Header,{children:[(0,s.jsx)(m.iA.HeaderCell,{}),(0,s.jsx)(m.iA.HeaderCell,{})]}),(0,s.jsx)(m.iA.Body,{className:"lg:-mr-24 lg:pr-24",children:L.map((function(e,n){return(0,s.jsxs)(m.iA.BodyRow,{children:[(0,s.jsx)(m.iA.BodyCell,{}),(0,s.jsx)(m.iA.BodyCell,{children:(0,s.jsx)(S,{data:e,noBorder:!0})})]},"b-".concat(n))}))})]}))})})]})})]})})})}),"final-all")},40904:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/discussion/[_id]",function(){return t(67369)}])}},function(e){e.O(0,[9774,2554,4597,9650,6993,6095,8661,9669,3913,2283,1878,5955,5774],(function(){return n=40904,e(e.s=n);var n}));var n=e.O();_N_E=n}]);