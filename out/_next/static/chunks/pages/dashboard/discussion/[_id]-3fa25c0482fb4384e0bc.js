(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8451],{94677:function(e,n,r){"use strict";var t,i,a=r(67294);function s(){return(s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e}).apply(this,arguments)}n.Z=function(e){return a.createElement("svg",s({"data-name":"Icon ionic-md-thumbs-up",xmlns:"http://www.w3.org/2000/svg",width:16.486,height:15.222},e),t||(t=a.createElement("path",{"data-name":"Path 11186",fill:"currentColor",className:"ic_like_svg__cls-1",d:"M5.946 15.222h6.818a1.454 1.454 0 001.356-.928l2.263-5.367a1.517 1.517 0 00.1-.555v-1.53a1.748 1.748 0 00-1.5-1.768h-4.72l.714-3.231.024-.238a1.149 1.149 0 00-.329-.8l-.8-.8-4.996 5.041A1.526 1.526 0 004.44 6.12v7.611a1.5 1.5 0 001.506 1.491z"})),i||(i=a.createElement("path",{"data-name":"Path 11187",fill:"currentColor",className:"ic_like_svg__cls-1",d:"M0 6.342h2.537v8.879H0z"})))}},24015:function(e,n,r){"use strict";r.d(n,{a:function(){return c}});var t=r(96156),i=r(85893),a=r(67294),s=r(11163),l=r(49226);var o=r(44791);function d(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}var c=function(e,n){return function(r){var c=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).urlType,n=void 0===e?"public":e,r=(0,l.v9)((function(e){return e.authReducer.userInfo}));return(0,a.useEffect)((function(){if("public"!==n&&n&&r)if(r&&null!==r&&void 0!==r&&r.isLoggedIn)if("member"===r.role){if("auth"===n)return"verifying"===r.period&&s.default.push("/verify-email"),"onboarding"===r.period&&s.default.push("/onboard"),void("final"===r.period&&s.default.push("/dashboard"));if("verifying"===n)return"onboarding"===r.period&&s.default.push("/onboard"),void("final"===r.period&&s.default.push("/dashboard"));if("onboarding"===n)return"verifying"===r.period&&s.default.push("/verify-email"),void("final"===r.period&&s.default.push("/dashboard"));if("final-member"===n||"final-all"===n)return"verifying"===r.period&&s.default.push("/verify-email"),void("onboarding"===r.period&&s.default.push("/onboard"));"final-admin"===n&&("verifying"===r.period&&s.default.push("/verify-email"),"onboarding"===r.period&&s.default.push("/onboard"),"final"===r.period&&s.default.push("/dashboard"))}else"admin"===r.role&&"final-all"!==n&&"final-admin"!==n&&s.default.push("/admin/dashboard");else"auth"!==n&&s.default.push("/login")}),[r,n]),{user:r}}({urlType:n}).user;if(n&&"public"!==n){if(!c)return(0,i.jsx)(o.Z,{});if("auth"===n&&c.isLoggedIn)return(0,i.jsx)(o.Z,{});if("auth"!==n&&!c.isLoggedIn)return(0,i.jsx)(o.Z,{});if("member"===c.role){if(["final-all","final-member"].includes(n)&&"final"!==c.period)return(0,i.jsx)(o.Z,{});if(["verifying"].includes(n)&&"verifying"!==c.period)return(0,i.jsx)(o.Z,{});if(["onboarding"].includes(n)&&"onboarding"!==c.period)return(0,i.jsx)(o.Z,{})}if("admin"===c.role&&["verifying","onboarding","final-member"].includes(n))return(0,i.jsx)(o.Z,{})}return(0,i.jsx)(e,function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?d(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}({},r))}}},58018:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return Z}});var t,i,a=r(96156),s=r(85893),l=r(32465),o=r(67294),d=r(49226),c=r(11163),u=r(42283),f=r(29163),h=r(25955),m=r(28569),p=r(64605),v=r(4478),g=r(94677);function b(){return(b=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e}).apply(this,arguments)}var x,j=function(e){return o.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",width:17.49,height:16.427},e),t||(t=o.createElement("defs",null,o.createElement("style",null,".ic_dislike_svg__cls-1{fill:none;stroke:#9a9a9a}"))),i||(i=o.createElement("g",{id:"ic_dislike_svg__Icon_ionic-md-thumbs-down","data-name":"Icon ionic-md-thumbs-down",transform:"translate(.5 .5)"},o.createElement("path",{id:"ic_dislike_svg__Path_11188","data-name":"Path 11188",className:"ic_dislike_svg__cls-1",d:"M13.919 4.5H7.1a1.454 1.454 0 00-1.356.928l-2.266 5.367a1.517 1.517 0 00-.1.555v1.53a1.748 1.748 0 001.5 1.768H9.6l-.714 3.231-.024.238a1.149 1.149 0 00.329.8l.793.8 5-5.042a1.526 1.526 0 00.436-1.074V5.99a1.5 1.5 0 00-1.501-1.49z",transform:"translate(-3.375 -4.5)"}),o.createElement("path",{id:"ic_dislike_svg__Path_11189","data-name":"Path 11189",className:"ic_dislike_svg__cls-1",d:"M28.125 4.5h2.537v8.879h-2.537z",transform:"translate(-14.172 -4.5)"}))))};function y(){return(y=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e}).apply(this,arguments)}var _=function(e){return o.createElement("svg",y({xmlns:"http://www.w3.org/2000/svg",width:17.49,height:16.427},e),x||(x=o.createElement("g",{"data-name":"Icon ionic-md-thumbs-down"},o.createElement("path",{"data-name":"Path 11188",fill:"currentColor",className:"ic_dislike_true_svg__cls-1",d:"M11.044.5H4.225a1.454 1.454 0 00-1.356.928L.603 6.795a1.517 1.517 0 00-.1.555v1.53a1.748 1.748 0 001.5 1.768h4.722l-.714 3.231-.024.238a1.149 1.149 0 00.329.8l.793.8 5-5.042a1.526 1.526 0 00.436-1.074V1.99A1.5 1.5 0 0011.044.5z"}),o.createElement("path",{"data-name":"Path 11189",fill:"currentColor",className:"ic_dislike_true_svg__cls-1",d:"M14.453.5h2.537v8.879h-2.537z"}))))},w=r(24015),N=r(29586),O=r(8517),k=r(56073);function P(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function E(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?P(Object(r),!0).forEach((function(n){(0,a.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function C(){var e=(0,l.Z)(["\n  .discussion-table {\n    .col-1 {\n      width: 0%;\n    }\n    .col-2 {\n      width: 100%;\n    }\n"]);return C=function(){return e},e}var I=f.ZP.div(C()),D=function(e){var n,r=e.data,t=e.noBorder;return(0,s.jsxs)("div",{className:"flex py-8 border-gray1 flex-col lg:flex-row ".concat(t?"":"border-b"),children:[(0,s.jsxs)("div",{className:"flex-none flex flex-row lg:flex-col lg:w-44",children:[(0,s.jsx)("div",{className:"w-24 h-24 mr-5 lg:mr-12",children:(0,s.jsx)("img",{className:"h-full w-full object-cover rounded-lg shadow-lg",src:(null===r||void 0===r||null===(n=r.user)||void 0===n?void 0:n.avatar_url)||"/images/img_signature.png",alt:"avatar"})}),(0,s.jsxs)("div",{className:"pt-2 pr-6 mt-auto lg:mt-0",children:[(0,s.jsx)("p",{className:"text-sm font-bold py-1",children:r.user.pseudonym}),(0,s.jsx)("div",{className:"border-gray1 border-b"}),(0,s.jsxs)("p",{className:"text-xxs py-1",children:["Validator ID: ",r.user.validatorId]}),(0,s.jsx)("div",{className:"border-gray1 border-b"}),(0,s.jsx)("p",{className:"text-xxs py-1",children:(0,N.p)(r.user.created_at,"d/m/yyyy - hh:mma")}),(0,s.jsx)("div",{className:"border-gray1 border-b"})]})]}),(0,s.jsx)("div",{className:"chat-content mt-5 lg:m-0",children:(0,s.jsx)("div",{className:"chat-content-body",children:(0,s.jsx)("p",{className:"text-sm mb-5",dangerouslySetInnerHTML:{__html:r.description}})})})]})},Z=(0,w.a)((function(){var e=(0,d.v9)((function(e){return e.authReducer.userInfo.fullInfo})),n=(0,o.useState)(null),r=n[0],t=n[1],i=(0,v.R)().setDialog,a=(0,c.useRouter)().query._id,l=(0,d.I0)(),f=(0,o.useContext)(k.AppContext).setLoading,b=(0,o.useState)(!1),x=b[0],y=b[1],w=(0,o.useState)(!1),N=w[0],P=w[1],C=(0,u.cI)({mode:"onChange"}),Z=C.control,M=C.handleSubmit,A=C.setValue,S=(0,p.x)(),L=S.data,H=S.register,B=S.hasMore,z=S.appendData,R=S.setHasMore,T=S.page,V=S.setPage,X=function(n){n&&r.is_like||!n&&r.is_vote&&!r.is_like||r.user.id===(null===e||void 0===e?void 0:e.id)||i({type:"DialogConfirm",data:{title:"Are you sure to ".concat(n?"vote":"unvote"," to discussion?"),ok:"OK",cancel:"Cancel"},afterClosed:function(e){e&&l((0,O.ob)({discussion_id:a,is_like:n},(function(e){var n,r;t(E(E({},e.discussion),{is_vote:null===e||void 0===e||null===(n=e.vote)||void 0===n?void 0:n.id,is_like:null===e||void 0===e||null===(r=e.vote)||void 0===r?void 0:r.is_like}))})))}})};(0,o.useEffect)((function(){a&&(q(),Q())}),[a]);var q=function(){f(!0),l((0,O.XQ)(a,(function(e){t(e),f(!1)}),(function(){f(!1)})))},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T;l((0,O.oo)({id:a,page:e},(function(e,n){z(e),R(n),V((function(e){return e+1}))})))},K=function(){return(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsxs)("button",{type:"button",className:"flex px-6 items-center focus:outline-none",onClick:function(){return X(1)},children:[(0,s.jsx)(g.Z,{className:r.is_vote&&r.is_like?"text-primary":""}),(0,s.jsx)("span",{className:"pl-2.5",children:r.likes||0})]}),(0,s.jsxs)("button",{type:"button",className:"flex px-6 items-center focus:outline-none",onClick:function(){return X(0)},children:[r.is_vote&&!r.is_like?(0,s.jsx)(_,{className:"text-primary"}):(0,s.jsx)(j,{}),(0,s.jsx)("span",{className:"pl-2.5",children:r.dislikes||0})]})]})};return(0,s.jsx)(h.Z,{children:(0,s.jsx)(m.Zb,{className:"h-full lg:pl-24 lg:py-11 lg:shadow-2xl",noShadow:!0,children:r&&(0,s.jsxs)("div",{className:"w-full h-full",children:[(0,s.jsxs)("div",{className:"card-header lg:mr-24 lg:h-70px",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(m.xE,{href:"/dashboard/discussion",text:"Discussions"}),(0,s.jsx)("div",{className:"inline-block lg:hidden pb-2.5",children:(0,s.jsx)(K,{})})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-3.5",children:[(0,s.jsx)("h3",{className:"text-dark2 text-xl lg:pr-32 font-medium line-clamp-1",children:r.title}),(0,s.jsx)("div",{className:"hidden lg:inline-block",children:(0,s.jsx)(K,{})})]}),(0,s.jsx)("div",{className:"border-primary border-b-2"})]}),(0,s.jsx)("div",{className:"card-body overflow-y-auto lg:h-100%-70px",children:(0,s.jsxs)("div",{className:"lg:pr-24",children:[(0,s.jsx)(D,{data:r,noBorder:!0}),e&&r.user.id!==e.id&&(0,s.jsx)("div",{className:"relative pt-4 mb-8 lg:mb-12 ck-editor-reverse",children:(0,s.jsxs)("form",{onSubmit:M((function(e){var n;y(!0),n=e,l((0,O.nn)({comment_id:(null===n||void 0===n?void 0:n.id)||null,discussion_id:a,description:n.description},(function(e){var n=e.comment,r=null===L||void 0===L?void 0:L.findIndex((function(e){return e.id===n.id}));-1!==r&&L.splice(r,1),z([n],!0),y(!1),A("description","")}),(function(){y(!1)})))})),children:[(0,s.jsx)(u.Qr,{name:"description",control:Z,render:function(e){var n=e.field,r=n.value,t=n.onChange;return(0,s.jsx)(m.ML,{value:r,onChange:function(e){P((function(n){return!!e.length})),t(e)}})},rules:{required:""}}),(0,s.jsx)(m.fl,{type:"submit",isDisabled:!N||x,isLoading:x,title:"Add Comment",className:"tmy-5 h-16 lg:absolute lg:m-0 lg:bottom-4 lg:right-12 lg:h-11 text-lg w-full text-white lg:w-48 rounded-full bg-primary hover:opacity-40 disabled:opacity-40 disabled:cursor-not-allowed focus:outline-none shadow-mdext-lg text-white w-full mt-10 lg:w-auto px-7 h-12 rounded-full bg-primary hover:opacity-40 disabled:opacity-40 disabled:cursor-not-allowed focus:outline-none shadow-md"})]})}),(0,s.jsx)("div",{className:"hidden lg:block border-primary border-b"}),(0,s.jsx)("div",{className:"pb-20 h-500px",children:(0,s.jsx)(I,{className:"h-full",children:(0,s.jsxs)(m.iA,E(E({},H),{},{className:"discussion-table h-full",onLoadMore:Q,hasMore:B,dataLength:L.length,noMargin:!0,children:[(0,s.jsxs)(m.iA.Header,{children:[(0,s.jsx)(m.iA.HeaderCell,{}),(0,s.jsx)(m.iA.HeaderCell,{})]}),(0,s.jsx)(m.iA.Body,{children:L.map((function(e,n){return(0,s.jsxs)(m.iA.BodyRow,{children:[(0,s.jsx)(m.iA.BodyCell,{}),(0,s.jsx)(m.iA.BodyCell,{children:(0,s.jsx)(D,{data:e,noBorder:!0})})]},"b-".concat(n))}))})]}))})})]})})]})})})}),"final-all")},29586:function(e,n,r){"use strict";r.d(n,{p:function(){return i},e:function(){return a}});var t=r(38661),i=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd/MM/yyyy",r=new Date(e);return"Invalid Date"===r.toString()?r.toString():(0,t.Z)(r,n)},a=function(e){return e?"".concat(e.substr(0,10),"...").concat(e.substr(-4)):"-"}},40904:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/discussion/[_id]",function(){return r(58018)}])}},function(e){e.O(0,[9774,2554,4597,9650,6993,6095,9669,3913,8661,2283,1878,5955,5774],(function(){return n=40904,e(e.s=n);var n}));var n=e.O();_N_E=n}]);