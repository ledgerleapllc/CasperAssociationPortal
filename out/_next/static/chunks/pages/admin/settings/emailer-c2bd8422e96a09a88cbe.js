(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2267],{24015:function(e,n,i){"use strict";i.d(n,{a:function(){return d}});var t=i(96156),r=i(85893),a=i(67294),l=i(11163),s=i(49226);var o=i(44791);function c(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}var d=function(e,n){return function(i){var d=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).urlType,n=void 0===e?"public":e,i=(0,s.v9)((function(e){return e.authReducer.userInfo}));return(0,a.useEffect)((function(){if("public"!==n&&n&&i)if(i&&null!==i&&void 0!==i&&i.isLoggedIn)if("member"===i.role){if("auth"===n)return"verifying"===i.period&&l.default.push("/verify-email"),"onboarding"===i.period&&l.default.push("/onboard"),void("final"===i.period&&l.default.push("/dashboard"));if("verifying"===n)return"onboarding"===i.period&&l.default.push("/onboard"),void("final"===i.period&&l.default.push("/dashboard"));if("onboarding"===n)return"verifying"===i.period&&l.default.push("/verify-email"),void("final"===i.period&&l.default.push("/dashboard"));if("final-member"===n||"final-all"===n)return"verifying"===i.period&&l.default.push("/verify-email"),void("onboarding"===i.period&&l.default.push("/onboard"));"final-admin"===n&&("verifying"===i.period&&l.default.push("/verify-email"),"onboarding"===i.period&&l.default.push("/onboard"),"final"===i.period&&l.default.push("/dashboard"))}else"admin"===i.role&&"final-all"!==n&&"final-admin"!==n&&l.default.push("/admin/dashboard");else"auth"!==n&&l.default.push("/login")}),[i,n]),{user:i}}({urlType:n}).user;if(n&&"public"!==n){if(!d)return(0,r.jsx)(o.Z,{});if("auth"===n&&d.isLoggedIn)return(0,r.jsx)(o.Z,{});if("auth"!==n&&!d.isLoggedIn)return(0,r.jsx)(o.Z,{});if("member"===d.role){if(["final-all","final-member"].includes(n)&&"final"!==d.period)return(0,r.jsx)(o.Z,{});if(["verifying"].includes(n)&&"verifying"!==d.period)return(0,r.jsx)(o.Z,{});if(["onboarding"].includes(n)&&"onboarding"!==d.period)return(0,r.jsx)(o.Z,{})}if("admin"===d.role&&["verifying","onboarding","final-member"].includes(n))return(0,r.jsx)(o.Z,{})}return(0,r.jsx)(e,function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?c(Object(i),!0).forEach((function(n){(0,t.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}({},i))}}},24205:function(e,n,i){"use strict";i.d(n,{Ge:function(){return t},QI:function(){return r},zC:function(){return a},qn:function(){return l},tH:function(){return s},VX:function(){return o},FZ:function(){return c},ec:function(){return d},mS:function(){return u}});var t=/^[\.a-zA-Z\s ]*$/,r=/^[_A-Za-z0-9-+]+(\.[_A-Za-z0-9-+]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9-]+)*(\.[A-Za-z\u200c\u200b]{2,})$/,a=/(^[0-9])/,l=/^-?[1-9]/,s=/^[A-Za-z0-9-]*$/,o=/^[A-Za-z0-9-]*$/,c=/(^)@[A-Za-z0-9-\_]*$/,d=/^[A-Za-z0-9-\s\.\_ ]*$/,u=new RegExp("".concat(/(?=.*?[a-zA-Z])/.source).concat(/(?=.*?[0-9])/.source).concat(/(?=.*?[\!\"\-\@\#\$\%\&\*\(\)\'\^\`\.\,\/\:\;\_\+\=\<\>\?\{\}\[\\\]])/.source))},81078:function(e,n,i){"use strict";i.r(n);var t=i(85893),r=i(87329),a=i(96156),l=i(32465),s=i(67294),o=i(49226),c=i(29163),d=i(42283),u=i(24015),f=i(25955),m=i(28569),h=i(64605),p=i(87028),x=i(56073),g=i(4478),b=i(24205);function v(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function j(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?v(Object(i),!0).forEach((function(n){(0,a.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}function y(){var e=(0,l.Z)(["\n  .emailer-admin-table {\n    .col-1 {\n      width: 60%;\n    }\n    .col-2 {\n      width: 40%;\n    }\n  }\n"]);return y=function(){return e},e}var w=c.ZP.div(y()),N=function(e){var n,i,r=e.closeDialog,a=e.fetchData,l=(0,d.cI)({mode:"onChange"}),c=l.formState,u=l.register,f=l.handleSubmit,h=(0,s.useState)(!1),x=h[0],g=h[1],v=(0,o.I0)();return(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"mb-10 text-2xl",children:"Add a new recipient of admin email alerts."}),(0,t.jsxs)("form",{className:"w-full",onSubmit:f((function(e){g(!0),v((0,p.Xj)(e,(function(){a(),g(!1),r()}),(function(){g(!1)})))})),children:[(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsx)("input",j({type:"text",className:"w-full mt-2 h-14 px-7 rounded-full shadow-md focus:outline-none",name:"email",placeholder:"Enter email address"},u("email",{required:"Email is require",pattern:{message:"Email is invalid",value:b.QI}}))),(null===(n=c.errors)||void 0===n?void 0:n.email)&&(0,t.jsx)("p",{className:"mt-2 text-primary",children:null===(i=c.errors.email)||void 0===i?void 0:i.message})]}),(0,t.jsxs)("div",{className:"flex items-center mt-10",children:[(0,t.jsx)(m.fl,{type:"submit",isDisabled:!c.isValid||x,isLoading:x,title:"Add",className:"mr-5 text-sm h-16 lg:w-52 text-white rounded-full bg-primary hover:opacity-40 disabled:opacity-40 disabled:cursor-not-allowed focus:outline-none shadow-md"}),(0,t.jsx)(m.zx,{primaryOutline:!0,className:"h-16 lg:w-52",onClick:r,children:"Cancel"})]})]})]})};n.default=(0,u.a)((function(){var e=(0,h.x)(),n=e.data,i=e.setData,a=(0,s.useState)([]),l=a[0],c=a[1],d=(0,s.useState)([]),u=d[0],b=d[1],v=(0,o.I0)(),y=(0,s.useContext)(x.AppContext).setLoading,O=(0,g.R)(),Z=O.setDialog,A=O.onClosed;(0,s.useEffect)((function(){y(!0),C()}),[]);var C=function(){v((0,p.og)((function(e){i(null===e||void 0===e?void 0:e.admins),b(null===e||void 0===e?void 0:e.triggerUser),c(null===e||void 0===e?void 0:e.triggerAdmin),y(!1)}),(function(){y(!1)})))},k=function(e,n){var i=(0,r.Z)(u),t=j(j({},e),{},{editing:!1});i[n]=j(j({},i[n]),t),b(i)};return(0,t.jsx)(f.Z,{children:(0,t.jsx)(m.Zb,{className:"h-full py-7",children:(0,t.jsxs)("div",{className:"bg-transparent h-full",children:[(0,t.jsx)("div",{className:"xl:pb-2 2xl:pb-5 px-24",children:(0,t.jsx)("div",{className:"w-full h-70px",children:(0,t.jsxs)("div",{className:"lg:h-70px flex flex-col justify-center",children:[(0,t.jsx)(m.xE,{href:"/admin/settings",text:"Back",force:!0}),(0,t.jsx)("h3",{className:"text-dark2 text-xl lg:pr-32 font-medium mb-3.5",children:"Emailer"}),(0,t.jsx)("div",{className:"border-primary border-b-2"})]})})}),(0,t.jsxs)("div",{className:"px-24",style:{height:"calc(100% - 80px)",overflowY:"auto"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-dark2 text-lg font-medium",children:"Emailer Admins"}),(0,t.jsx)(w,{className:"max-h-200px",children:(0,t.jsxs)(m.iA,{className:"emailer-admin-table my-10 h-full max-h-200px",onLoadMore:function(){},hasMore:!1,dataLength:n.length,children:[(0,t.jsxs)(m.iA.Header,{children:[(0,t.jsx)(m.iA.HeaderCell,{children:(0,t.jsx)("p",{children:"Email"})}),(0,t.jsx)(m.iA.HeaderCell,{children:(0,t.jsx)("p",{children:"Action"})})]}),(0,t.jsx)(m.iA.Body,{className:"lg:-mr-24 lg:pr-24",children:n.map((function(e,n){return(0,t.jsxs)(m.iA.BodyRow,{children:[(0,t.jsx)(m.iA.BodyCell,{children:(0,t.jsx)("p",{className:"truncate",children:e.email})}),(0,t.jsx)(m.iA.BodyCell,{children:(0,t.jsx)("button",{type:"button",className:"text-lg text-white w-auto px-5 h-7 rounded-full bg-primary shadow-md focus:outline-none hover:opacity-40",onClick:function(){return n=e,void Z({type:"DialogConfirm",data:{title:"",content:(0,t.jsx)("p",{className:"text-xl",children:"Are you sure you are going to remove this emailer admin?"}),ok:"Yes, Please continue",cancel:"Cancel"},afterClosed:function(e){e&&(y(!0),v((0,p.lf)({id:n.id},(function(){C(),y(!1)}),(function(){y(!1)}))))}});var n},children:"Remove"})})]},"b-".concat(n))}))})]})}),(0,t.jsx)("button",{type:"button",className:"text-lg text-white w-52 px-5 h-12 rounded-full bg-primary shadow-md focus:outline-none hover:opacity-40",onClick:function(){Z({type:"Dialog",data:{content:(0,t.jsx)(N,{closeDialog:A,fetchData:C})},settings:{hideButton:!0}})},children:"Add"})]}),(0,t.jsxs)("div",{className:"emailer-item-section",children:[(0,t.jsx)("h3",{className:"text-dark2 text-lg font-medium mb-4",children:"Admin Email Triggers"}),!(null===l||void 0===l||!l.length)&&l.map((function(e,n){return(0,t.jsxs)("div",{className:"emailer-item",children:[(0,t.jsxs)("div",{className:"flex items-center mb-4",children:[(0,t.jsx)(m.rs,{checked:!!e.enabled,onChange:function(i){return function(e,n,i){var t=(0,r.Z)(l),a=j(j({},n),{},{enabled:e.target.checked});t[i]=j(j({},t[i]),a),v((0,p.Vk)({id:n.id,data:a},(function(){c(t)}),(function(){})))}(i,e,n)}}),(0,t.jsx)("label",{className:"ml-3",children:e.title})]}),(0,t.jsx)("p",{children:e.content})]},"emailer-item-".concat(n))}))]}),(0,t.jsxs)("div",{className:"emailer-item-section",children:[(0,t.jsx)("h3",{className:"text-dark2 text-lg font-medium mb-4",children:"User Email Triggers"}),!(null===u||void 0===u||!u.length)&&u.map((function(e,n){var i;return(0,t.jsxs)("div",{className:"emailer-item",children:[(0,t.jsxs)("div",{className:"flex items-center mb-4",children:[(0,t.jsx)(m.rs,{checked:!!e.enabled,onChange:function(i){return function(e,n,i){var t=(0,r.Z)(u),a=j(j({},n),{},{enabled:e.target.checked});t[i]=j(j({},t[i]),a),b(t),v((0,p.D)({id:n.id,data:a},(function(){b(t)}),(function(){})))}(i,e,n)}}),(0,t.jsx)("label",{className:"ml-3",children:e.title})]}),e.editing?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("textarea",{className:"focus:outline-none",value:e.content,onChange:function(i){return function(e,n,i){var t=(0,r.Z)(u),a=j(j({},n),{},{content:e.target.value});t[i]=j(j({},t[i]),a),b(t)}(i,e,n)}}),!(null!==e&&void 0!==e&&null!==(i=e.content)&&void 0!==i&&i.trim().length)&&(0,t.jsx)("span",{className:"mt-2 text-primary",children:"Please input message content"})]}):(0,t.jsx)("p",{children:e.content}),e.editing?(0,t.jsxs)("div",{className:"flex items-center mt-4",children:[(0,t.jsx)(m.fl,{type:"button",isDisabled:e.isRequesting,isLoading:e.isRequesting,title:"Save",className:"mr-5 text-sm h-11 lg:w-52 text-white rounded-full bg-primary hover:opacity-40 disabled:opacity-40 disabled:cursor-not-allowed focus:outline-none shadow-md",onClick:function(){return function(e){var n=(0,r.Z)(u),i=n[e];i.content&&i.content.trim()&&(n[e]=j(j({},n[e]),{isRequesting:!0}),b(n),v((0,p.D)({id:i.id,data:i},(function(){n[e]=j(j({},n[e]),{isRequesting:!1}),b(n),k(i,e)}),(function(){n[e]=j(j({},n[e]),{isRequesting:!1}),b(n)}))))}(n)}}),(0,t.jsx)(m.zx,{primaryOutline:!0,onClick:function(){return k(e,n)},children:"Cancel Edit"})]}):(0,t.jsx)(m.zx,{primary:!0,onClick:function(){return function(e,n){var i=(0,r.Z)(u),t=j(j({},e),{},{editing:!0});i[n]=j(j({},i[n]),t),b(i)}(e,n)},className:"mt-4",children:"Edit Message"})]},"emailer-item-".concat(n))}))]})]})]})})})}),"final-admin")},21062:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/settings/emailer",function(){return i(81078)}])}},function(e){e.O(0,[9774,2554,4597,9650,6993,6095,9669,3913,2283,1878,5955,2321],(function(){return n=21062,e(e.s=n);var n}));var n=e.O();_N_E=n}]);